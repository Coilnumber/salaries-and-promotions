
# Salaries and promotions

**Ниже представлена инструкция по запуску и использованию проекта для просмотра зарплаты и даты следующего повышения сотрудников.**

Доступ к данным реализован через авторизацию, путём генерации JWT-токена по логину и паролю.

---
### 1. Установка проекта и зависимостей

Для начала работы с сервисом скачаем его с открытого git-репозитория. 

```bash
git clone https://github.com/Coilnumber/salaries-and-promotions
```

После этого нам нужно установить виртуальное окружение и подтянуть все зависимости , которые есть в poetry.  
Перед этим убедитесь, что poetry у вас установлен.

```bash
poetry config virtualenvs.in-project true
poetry install
```

---

### 2. Генерация приватного и публичного ключа

Так как секретный и приватные ключи никогда не должны быть в открытом доступе 
1. Добавляем их в Гитигнор
2. Генерируем локально

Для этого переходим в пакет проекта, где лежат файлы аутентификации, создаём папку для хранения ключей

```bash
cd salaries_and_promotions/auth
mkdir certs
cd certs
```

Если у вас на компьютере не установлен openssl это нужно сделать  
https://slproweb.com/products/Win32OpenSSL.html  
Во время установки укажите, что openssl будет добавлен в системный PATH

**Генерируем в ней приватный и публичный ключи**
```bash
openssl genrsa -out private.pem
openssl rsa -in private.pem -outform PEM -pubout -out public.pem
```


Вернулись в корневую папку
```bash
cd ../../..
```

---

### 3. Запуск проекта
**Теперь мы можем запустить сервис и проверить, что всё работает корректно**

По этой команде мы сразу оказываемся в интерактивной документации fastAPI
```bash
python run.py
```
---
### 4. Выпуск токена для аутентифицированного пользователя 

**У нас есть эндпоинт с пост-запросом, где происходит логин через форму.  
Для примера логин и пароль одного из пользователей:**

username - zakk  
password - gibson

Входим через аутентификацию и оказываемся в своём аккаунте, на руках имеем активный jwt

---
### 5. Получение данных о зарплате и дате повышения

**Так как мы уже прошли аутентификацию мы можем по JWT токену перейти на страницу с нужной нам информацией**  
/auth/users/get_data

 ---
### 6. Внесение новых пользователей

**Так как база данных обновляется внести новых пользователей вы можете в**  
[users_db.py](salaries_and_promotions/users/users_db.py)   
В соответствии с UserSchema 
[schemas.py](salaries_and_promotions/users/schemas.py)







